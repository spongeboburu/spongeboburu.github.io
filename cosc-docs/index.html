<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cosc: cosc, OSC library for C99 or C++11.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cosc<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">OSC library for C99 or C++11.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">cosc, OSC library for C99 or C++11. </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>NOTE! "main" branch API is not stable.</p>
<p>What is this about? OSC stands for Open Sound Control and is a formalized way of reading/writing data, see <a href="https://opensoundcontrol.stanford.edu/spec-1_0.html">https://opensoundcontrol.stanford.edu/spec-1_0.html</a>.</p>
<p>For example as RPC over UDP in projects like <a href="https://supercollider.github.io/">https://supercollider.github.io/</a>, but it can be used in any event driven system due to it's simple design. Since I've used OSC a lot in recent work I thought this would be fun project to tinker with on my spare time and hopefully someone finds it useful.</p>
<p>This library is designed for maximum cross-platform compatibility and with the build (and first time inclusion) define options it should compile and run almost anywhere, including unhosted environments without standard libraries.</p>
<p>If you are looking for a more high level implementation with network support, perhaps <a href="https://liblo.sourceforge.net/">https://liblo.sourceforge.net/</a> is a better choice.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features and limitations</h1>
<p><em>Features:</em></p>
<ul>
<li>Write/read OSC data.</li>
<li>Address and typetag validation.</li>
<li>Address and typetag pattern matching.</li>
<li>Timetag conversions.</li>
<li>Higher level writer/reader APIs with nesting.</li>
<li>Handle 64-bit values on systems without 64-bit types.</li>
<li>Handle floating point values on systems without floating point types.</li>
<li>No dynamic allocations.</li>
<li>Use of standard library is optional.</li>
<li>Use of <code>stdint.h</code> is optional.</li>
<li>Ability to typedef custom types for integer and floats.</li>
<li>C99 and C++11 compliant.</li>
<li>No optimizations relying on undefined behavior.</li>
<li>MIT license.</li>
</ul>
<p><em>Limitations:</em></p>
<ul>
<li>No transport layer, though this is as intended for this library.</li>
<li>Only one array per message.</li>
<li>Arrays must be at the end of the message.</li>
</ul>
<p>Because the OSC specifications does not describe how arrays should be specified and does not give any examples this implementation is mostly guess work. The fact that the length of the array is unspecified, unlike BLOBs for example, makes it very difficult to implement in a flexible way which is why many implementations do not support arrays.</p>
<p>The limitation is then that arrays may appear only once and only at the end of the message.</p>
<p>Example uses of arrays in a typetag:</p>
<ul>
<li>",[fff]" &ndash; Message is an array of vector3f.</li>
<li>",ifsb[fff]" &ndash; Message ends with an array of vector3f.</li>
<li>",ifsb[fff]i" &ndash; Invalid.</li>
</ul>
<p>This should be good enough. NOTE that for maximum compatibility with other OSC endpoints you should make sure they have support for arrays.</p>
<p>Array support can be removed at compile time by defining COSC_NOARRAY which may provide a modest performance boost if arrays are not required.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Building</h1>
<p>Using a compiler, for example gcc, if in the source directory:</p>
<div class="fragment"><div class="line">gcc -std=c99 cosc.c</div>
</div><!-- fragment --><p>and then just add the <code>-D</code> defines as required.</p>
<p>Using cmake, if in the source directory:</p>
<div class="fragment"><div class="line">cmake -B build</div>
<div class="line">cmake --build build</div>
</div><!-- fragment --><p>by default cmake will only build the static library, but if you want to build everything go for something like this:</p>
<div class="fragment"><div class="line">cmake -B build -DCOSC_BUILD_SHARED=ON -DCOSC_BUILD_EXAMPLES=ON -DCOSC_BUILD_TESTS=ON</div>
<div class="line">cmake --build build</div>
<div class="line">cmake --build build --target docs</div>
</div><!-- fragment --><p>will build static library, shared library, examples unit tests and generate Doxygen documentation. You can also add <code>-D</code> defines as required to the first cmake command.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Requirements</h1>
<ul>
<li>C99 or C++11 compatible compiler.</li>
<li>32-bit signed and unsigned integer support.<ul>
<li>Signed range -2147483648 to 2147483647.</li>
<li>Unsigned max 4294967295.</li>
</ul>
</li>
</ul>
<p>Optional:</p>
<ul>
<li>64-bit integers.<ul>
<li>Signed range -9223372036854775808 to 9223372036854775807.</li>
<li>Unsigned max 18446744073709551615.</li>
</ul>
</li>
<li>IEEE 754 single precision (32-bit) float.</li>
<li>IEEE 754 double precision (64-bit) float.</li>
<li>Standard C library (or standard C++ library).</li>
<li>Standard C headers (or C++ headers).</li>
<li>cmake for building.</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Defines at build/include</h1>
<p>Defined at compile and include time:</p>
<ul>
<li><code>COSC_NOSTDLIB</code> for no use of the standard library. This will also remove the dump functions.</li>
<li><code>COSC_NOPATTERN</code> to remove the pattern matching functions.</li>
<li><code>COSC_NOSWAP</code> for no endian swapping.</li>
<li><code>COSC_NOARRAY</code> to remove the support for arrays.</li>
<li><code>COSC_NODUMP</code> to remove the dump functions.</li>
<li><code>COSC_NOWRITER</code> to remove the writer functions.</li>
<li><code>COSC_NOREADER</code> to remove the reader functions.</li>
<li><code>COSC_NOTIMETAG</code> to remove timetag conversion functions.</li>
<li><code>COSC_NOFLTCONV</code> to remove float conversion functions.</li>
<li><code>COSC_NOSTDINT</code> for no inclusion of <code>stdint.h</code> (or <code>cstdint</code> if C++).</li>
<li><code>COSC_NOINT64</code> to typedef <code><a class="el" href="cosc_8h.html#aa1bf0962a90e87a6062cb9236f5432b3" title="Signed 64-bit integer.">cosc_int64</a></code> and <code><a class="el" href="cosc_8h.html#a282949645489b91e3dad719ee1a3bbcd" title="Unsigned 64-bit integer.">cosc_uint64</a></code> types as <code>struct <a class="el" href="structcosc__64bits.html" title="Used when 64-bit types are not available.">cosc_64bits</a></code>.</li>
<li><code>COSC_NOFLOAT32</code> to typedef <code><a class="el" href="cosc_8h.html#af441c39da6c58da4845cc4fc152d2c98" title="32-bit floating point.">cosc_float32</a></code> as <code><a class="el" href="cosc_8h.html#af038df0df37304e201834983c287c29b" title="Unsigned 32-bit integer.">cosc_uint32</a></code>.</li>
<li><code>COSC_NOFLOAT64</code> to typedef <code><a class="el" href="cosc_8h.html#a917c2efac5331f770cca5d54262cd0e4" title="64-bit floating point.">cosc_float64</a></code> as <code>struct <a class="el" href="structcosc__64bits.html" title="Used when 64-bit types are not available.">cosc_64bits</a></code>.</li>
<li><code>COSC_TYPE_UINT32</code> used to override typedef <code><a class="el" href="cosc_8h.html#af038df0df37304e201834983c287c29b" title="Unsigned 32-bit integer.">cosc_uint32</a></code>.</li>
<li><code>COSC_TYPE_INT32</code> used to override typedef <code><a class="el" href="cosc_8h.html#a041183dc7343166fd366a35f6dd3ee5f" title="Signed 32-bit integer.">cosc_int32</a></code>.</li>
<li><code>COSC_TYPE_FLOAT32</code> used to override typedef <code><a class="el" href="cosc_8h.html#af441c39da6c58da4845cc4fc152d2c98" title="32-bit floating point.">cosc_float32</a></code>.</li>
<li><code>COSC_TYPE_UINT64</code> used to override typedef <code><a class="el" href="cosc_8h.html#a282949645489b91e3dad719ee1a3bbcd" title="Unsigned 64-bit integer.">cosc_uint64</a></code>.</li>
<li><code>COSC_TYPE_INT64</code> used to override typedef <code><a class="el" href="cosc_8h.html#aa1bf0962a90e87a6062cb9236f5432b3" title="Signed 64-bit integer.">cosc_int64</a></code>.</li>
<li><code>COSC_TYPE_FLOAT64</code> used to override typedef <code><a class="el" href="cosc_8h.html#a917c2efac5331f770cca5d54262cd0e4" title="64-bit floating point.">cosc_float64</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Example uses</h1>
<p>At it's lowest level you can just write the raw data:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> buffer[1024] = {0};</div>
<div class="line"><a class="code hl_typedef" href="cosc_8h.html#a041183dc7343166fd366a35f6dd3ee5f">cosc_int32</a> ret, offset = 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Write it</span></div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#ac63868e851bc69b2b2ee1243e3c7e9f7">cosc_write_string</a>(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;/address&quot;</span>, 1024, NULL);</div>
<div class="line">offset += ret;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#ac63868e851bc69b2b2ee1243e3c7e9f7">cosc_write_string</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, <span class="stringliteral">&quot;,if&quot;</span>, 1024, NULL);</div>
<div class="line">offset += ret;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#a8808710e5a46095afd95ac4af48ca851">cosc_write_int32</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, 1234);</div>
<div class="line">offset += ret;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#af72b939dc3f085bf7c9e212d780b393f">cosc_write_float32</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, 12.34);</div>
<div class="line">offset += ret;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read it</span></div>
<div class="line">offset = 0;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *address = buffer;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#ad3a0bebcb614587ac2daa3d65e053c4a">cosc_read_string</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, NULL, 0, NULL);</div>
<div class="line">offset += ret;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *typetag = buffer + offset;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#ad3a0bebcb614587ac2daa3d65e053c4a">cosc_read_string</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, NULL, 0, NULL);</div>
<div class="line">offset += ret;</div>
<div class="line"><a class="code hl_typedef" href="cosc_8h.html#a041183dc7343166fd366a35f6dd3ee5f">cosc_int32</a> value_i;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#a6b7e0ae7ba9ecc380625b81ee53d17c9">cosc_read_int32</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, &amp;value_i);</div>
<div class="line">offset += ret;</div>
<div class="line"><a class="code hl_typedef" href="cosc_8h.html#af441c39da6c58da4845cc4fc152d2c98">cosc_float32</a> value_f;</div>
<div class="line">ret = <a class="code hl_function" href="cosc_8h.html#aa0a3e4268c7526b403a95c4814a9bf16">cosc_read_float32</a>(buffer + offset, <span class="keyword">sizeof</span>(buffer) - offset, &amp;value_f);</div>
<div class="line">offset += ret;</div>
<div class="ttc" id="acosc_8h_html_a041183dc7343166fd366a35f6dd3ee5f"><div class="ttname"><a href="cosc_8h.html#a041183dc7343166fd366a35f6dd3ee5f">cosc_int32</a></div><div class="ttdeci">COSC_TYPE_INT32 cosc_int32</div><div class="ttdoc">Signed 32-bit integer.</div><div class="ttdef"><b>Definition</b> cosc.h:253</div></div>
<div class="ttc" id="acosc_8h_html_a6b7e0ae7ba9ecc380625b81ee53d17c9"><div class="ttname"><a href="cosc_8h.html#a6b7e0ae7ba9ecc380625b81ee53d17c9">cosc_read_int32</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_read_int32(const void *buffer, cosc_int32 size, cosc_int32 *value)</div><div class="ttdoc">Read a 32-bit big endian signed integer.</div><div class="ttdef"><b>Definition</b> cosc.c:1161</div></div>
<div class="ttc" id="acosc_8h_html_a8808710e5a46095afd95ac4af48ca851"><div class="ttname"><a href="cosc_8h.html#a8808710e5a46095afd95ac4af48ca851">cosc_write_int32</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_write_int32(void *buffer, cosc_int32 size, cosc_int32 value)</div><div class="ttdoc">Write a 32-bit big endian signed integer.</div><div class="ttdef"><b>Definition</b> cosc.c:1147</div></div>
<div class="ttc" id="acosc_8h_html_aa0a3e4268c7526b403a95c4814a9bf16"><div class="ttname"><a href="cosc_8h.html#aa0a3e4268c7526b403a95c4814a9bf16">cosc_read_float32</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_read_float32(const void *buffer, cosc_int32 size, cosc_float32 *value)</div><div class="ttdoc">Read a 32-bit big endian floating point.</div><div class="ttdef"><b>Definition</b> cosc.c:1187</div></div>
<div class="ttc" id="acosc_8h_html_ac63868e851bc69b2b2ee1243e3c7e9f7"><div class="ttname"><a href="cosc_8h.html#ac63868e851bc69b2b2ee1243e3c7e9f7">cosc_write_string</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_write_string(void *buffer, cosc_int32 size, const char *value, cosc_int32 value_n, cosc_int32 *length)</div><div class="ttdoc">Write a string.</div><div class="ttdef"><b>Definition</b> cosc.c:1308</div></div>
<div class="ttc" id="acosc_8h_html_ad3a0bebcb614587ac2daa3d65e053c4a"><div class="ttname"><a href="cosc_8h.html#ad3a0bebcb614587ac2daa3d65e053c4a">cosc_read_string</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_read_string(const void *buffer, cosc_int32 size, char *value, cosc_int32 value_n, cosc_int32 *length)</div><div class="ttdoc">Read a string.</div><div class="ttdef"><b>Definition</b> cosc.c:1350</div></div>
<div class="ttc" id="acosc_8h_html_af441c39da6c58da4845cc4fc152d2c98"><div class="ttname"><a href="cosc_8h.html#af441c39da6c58da4845cc4fc152d2c98">cosc_float32</a></div><div class="ttdeci">COSC_TYPE_FLOAT32 cosc_float32</div><div class="ttdoc">32-bit floating point.</div><div class="ttdef"><b>Definition</b> cosc.h:350</div></div>
<div class="ttc" id="acosc_8h_html_af72b939dc3f085bf7c9e212d780b393f"><div class="ttname"><a href="cosc_8h.html#af72b939dc3f085bf7c9e212d780b393f">cosc_write_float32</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_write_float32(void *buffer, cosc_int32 size, cosc_float32 value)</div><div class="ttdoc">Write a 32-bit big endian floating point.</div><div class="ttdef"><b>Definition</b> cosc.c:1173</div></div>
</div><!-- fragment --><p>Write and read full message using a struct:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> buffer[1024];</div>
<div class="line"><span class="keyword">union </span><a class="code hl_union" href="unioncosc__value.html">cosc_value</a> values[11] = {</div>
<div class="line">    {.i = 0x12345678},</div>
<div class="line">    {.f = 12.34f},</div>
<div class="line">    {.s = {.s=<span class="stringliteral">&quot;Hello World!&quot;</span>, .length = 1024}},</div>
<div class="line">};</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structcosc__message.html">cosc_message</a> message;</div>
<div class="line">message.<a class="code hl_variable" href="structcosc__message.html#a9a1ee8608f797486851dee77c3ef145f">address</a> = <span class="stringliteral">&quot;/hello_world&quot;</span>;</div>
<div class="line">message.address_n = 12;</div>
<div class="line">message.typetag = <span class="stringliteral">&quot;,ifs&quot;</span>;</div>
<div class="line">message.typetag_n = 4;</div>
<div class="line">message.values.write = <a class="code hl_variable" href="structcosc__message.html#a461adf6e14f391d6cdc09f999c0f71c7">values</a>;</div>
<div class="line">message.values_n = 3;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="cosc_8h.html#a0a69acb13bda32fd7c1efd94f229b6c5">cosc_write_message</a>(</div>
<div class="line">    buffer, <span class="keyword">sizeof</span>(buffer), &amp;message,</div>
<div class="line">    <span class="keyword">true</span>, NULL</div>
<div class="line">);</div>
<div class="line"><a class="code hl_function" href="cosc_8h.html#affef551dc061d3c385cab15872431127">cosc_read_message</a>(</div>
<div class="line">    buffer, <span class="keyword">sizeof</span>(buffer), &amp;message,</div>
<div class="line">    &amp;packet_size, &amp;value_count, <span class="keyword">false</span></div>
<div class="line">);</div>
<div class="ttc" id="acosc_8h_html_a0a69acb13bda32fd7c1efd94f229b6c5"><div class="ttname"><a href="cosc_8h.html#a0a69acb13bda32fd7c1efd94f229b6c5">cosc_write_message</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_write_message(void *buffer, cosc_int32 size, const struct cosc_message *message, cosc_int32 psize, cosc_int32 *value_count)</div><div class="ttdoc">Write an OSC message.</div><div class="ttdef"><b>Definition</b> cosc.c:1923</div></div>
<div class="ttc" id="acosc_8h_html_affef551dc061d3c385cab15872431127"><div class="ttname"><a href="cosc_8h.html#affef551dc061d3c385cab15872431127">cosc_read_message</a></div><div class="ttdeci">COSC_API cosc_int32 cosc_read_message(const void *buffer, cosc_int32 size, struct cosc_message *message, cosc_int32 *psize, cosc_int32 *value_count, cosc_int32 exit_early)</div><div class="ttdoc">Read an OSC message.</div><div class="ttdef"><b>Definition</b> cosc.c:1975</div></div>
<div class="ttc" id="astructcosc__message_html"><div class="ttname"><a href="structcosc__message.html">cosc_message</a></div><div class="ttdoc">A message.</div><div class="ttdef"><b>Definition</b> cosc.h:536</div></div>
<div class="ttc" id="astructcosc__message_html_a461adf6e14f391d6cdc09f999c0f71c7"><div class="ttname"><a href="structcosc__message.html#a461adf6e14f391d6cdc09f999c0f71c7">cosc_message::values</a></div><div class="ttdeci">union cosc_message::@050073337162334015163030171201070055033256045255 values</div><div class="ttdoc">Const safety.</div></div>
<div class="ttc" id="astructcosc__message_html_a9a1ee8608f797486851dee77c3ef145f"><div class="ttname"><a href="structcosc__message.html#a9a1ee8608f797486851dee77c3ef145f">cosc_message::address</a></div><div class="ttdeci">const char * address</div><div class="ttdoc">The address.</div><div class="ttdef"><b>Definition</b> cosc.h:541</div></div>
<div class="ttc" id="aunioncosc__value_html"><div class="ttname"><a href="unioncosc__value.html">cosc_value</a></div><div class="ttdoc">A value.</div><div class="ttdef"><b>Definition</b> cosc.h:447</div></div>
</div><!-- fragment --><p>We could put a bundle ahead of it. This is the simple way of writing and reading OSC data, but there's a convenience API if you want to do more advanced nesting of messages in bundles etc.</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> buffer[1024];</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structcosc__level.html">cosc_level</a> levels[4];</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structcosc__serial.html">cosc_serial</a> writer;</div>
<div class="line"><a class="code hl_function" href="cosc_8h.html#a1e12a763bb29311b983c7596e5891ee3">cosc_writer_setup</a>(</div>
<div class="line">    &amp;writer,</div>
<div class="line">    buffer, <span class="keyword">sizeof</span>(buffer), <span class="comment">// Store to this buffer.</span></div>
<div class="line">    <a class="code hl_variable" href="structcosc__serial.html#af4e5b153690c1b4fbfecd5c28ec08bcd">levels</a>, 4, <span class="comment">// Provide 4 levels, 1 is minimum.</span></div>
<div class="line">    0 <span class="comment">// Zero flags.</span></div>
<div class="line">);</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structcosc__serial.html">cosc_serial</a> reader;</div>
<div class="line"><a class="code hl_function" href="cosc_8h.html#ac9755f3c33086f431bac1d666a95ea19">cosc_reader_setup</a>(</div>
<div class="line">    &amp;reader,</div>
<div class="line">    buffer, cosc_writer_get_size(&amp;writer), <span class="comment">// Load from this buffer.</span></div>
<div class="line">    <a class="code hl_variable" href="structcosc__serial.html#af4e5b153690c1b4fbfecd5c28ec08bcd">levels</a>, 4, <span class="comment">// Levels.</span></div>
<div class="line">    0 <span class="comment">// No flags.</span></div>
<div class="line">);</div>
<div class="ttc" id="acosc_8h_html_a1e12a763bb29311b983c7596e5891ee3"><div class="ttname"><a href="cosc_8h.html#a1e12a763bb29311b983c7596e5891ee3">cosc_writer_setup</a></div><div class="ttdeci">COSC_API void cosc_writer_setup(struct cosc_serial *serial, void *buffer, cosc_int32 buffer_size, struct cosc_level *levels, cosc_int32 level_max, cosc_uint32 flags)</div><div class="ttdoc">Setup a serial for writing.</div><div class="ttdef"><b>Definition</b> cosc.c:2408</div></div>
<div class="ttc" id="acosc_8h_html_ac9755f3c33086f431bac1d666a95ea19"><div class="ttname"><a href="cosc_8h.html#ac9755f3c33086f431bac1d666a95ea19">cosc_reader_setup</a></div><div class="ttdeci">COSC_API void cosc_reader_setup(struct cosc_serial *serial, const void *buffer, cosc_int32 buffer_size, struct cosc_level *levels, cosc_int32 level_max, cosc_uint32 flags)</div><div class="ttdoc">Setup a serial for reading.</div><div class="ttdef"><b>Definition</b> cosc.c:2846</div></div>
<div class="ttc" id="astructcosc__level_html"><div class="ttname"><a href="structcosc__level.html">cosc_level</a></div><div class="ttdoc">Used to manage the levels of a serial.</div><div class="ttdef"><b>Definition</b> cosc.h:603</div></div>
<div class="ttc" id="astructcosc__serial_html"><div class="ttname"><a href="structcosc__serial.html">cosc_serial</a></div><div class="ttdoc">A serial.</div><div class="ttdef"><b>Definition</b> cosc.h:653</div></div>
<div class="ttc" id="astructcosc__serial_html_af4e5b153690c1b4fbfecd5c28ec08bcd"><div class="ttname"><a href="structcosc__serial.html#af4e5b153690c1b4fbfecd5c28ec08bcd">cosc_serial::levels</a></div><div class="ttdeci">struct cosc_level * levels</div><div class="ttdoc">A pointer to an array of levels.</div><div class="ttdef"><b>Definition</b> cosc.h:673</div></div>
</div><!-- fragment --><p>and then using the writer/reader API to basically push or pop data from the buffer.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
64-bit types on non-64 systems.</h2>
<p>Handling 64-bit types on systems without them involves a struct with most significant and least significant bits.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structcosc__64bits.html">cosc_64bits</a></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="cosc_8h.html#af038df0df37304e201834983c287c29b">cosc_uint32</a> <a class="code hl_variable" href="structcosc__64bits.html#a2b8f0f6352cb209ae642266e76ac08d3">w</a>[2];</div>
<div class="line">};</div>
<div class="ttc" id="acosc_8h_html_af038df0df37304e201834983c287c29b"><div class="ttname"><a href="cosc_8h.html#af038df0df37304e201834983c287c29b">cosc_uint32</a></div><div class="ttdeci">COSC_TYPE_UINT32 cosc_uint32</div><div class="ttdoc">Unsigned 32-bit integer.</div><div class="ttdef"><b>Definition</b> cosc.h:248</div></div>
<div class="ttc" id="astructcosc__64bits_html"><div class="ttname"><a href="structcosc__64bits.html">cosc_64bits</a></div><div class="ttdoc">Used when 64-bit types are not available.</div><div class="ttdef"><b>Definition</b> cosc.h:327</div></div>
<div class="ttc" id="astructcosc__64bits_html_a2b8f0f6352cb209ae642266e76ac08d3"><div class="ttname"><a href="structcosc__64bits.html#a2b8f0f6352cb209ae642266e76ac08d3">cosc_64bits::w</a></div><div class="ttdeci">cosc_uint32 w[2]</div><div class="ttdoc">Most significant bits first then the least significant, i.e big endian layout for the words.</div><div class="ttdef"><b>Definition</b> cosc.h:333</div></div>
</div><!-- fragment --><p>There's a few conversion helper functions, but you are free to manipulate the bits for <code><a class="el" href="cosc_8h.html#a282949645489b91e3dad719ee1a3bbcd" title="Unsigned 64-bit integer.">cosc_uint64</a></code>, <code><a class="el" href="cosc_8h.html#aa1bf0962a90e87a6062cb9236f5432b3" title="Signed 64-bit integer.">cosc_int64</a></code> and <code><a class="el" href="cosc_8h.html#a917c2efac5331f770cca5d54262cd0e4" title="64-bit floating point.">cosc_float64</a></code> this way.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
License</h1>
<div class="fragment"><div class="line">cosc</div>
<div class="line">Copyright 2025 Peter Gebauer</div>
<div class="line"> </div>
<div class="line">Permission is hereby granted, free of charge, to any person obtaining a</div>
<div class="line">copy of this software and associated documentation files</div>
<div class="line">(the &quot;Software&quot;), to deal in the Software without restriction, including</div>
<div class="line">without limitation the rights to use, copy, modify, merge, publish,</div>
<div class="line">distribute, sublicense, and/or sell copies of the Software, and to</div>
<div class="line">permit persons to whom the Software is furnished to do so, subject to</div>
<div class="line">the following conditions:</div>
<div class="line"> </div>
<div class="line">The above copyright notice and this permission notice shall be included</div>
<div class="line">in all copies or substantial portions of the Software.</div>
<div class="line"> </div>
<div class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</div>
<div class="line">OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</div>
<div class="line">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</div>
<div class="line">IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY</div>
<div class="line">CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</div>
<div class="line">TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</div>
<div class="line">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
